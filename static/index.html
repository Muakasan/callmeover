<html>
	<head>
		<title>Call Me Over!</title>
		<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
		<script src="http://momentjs.com/downloads/moment.min.js"></script>
	</head>
	<body>
		<script>
			var socket = io();
			function sendName()
			{
				var name = document.getElementById("name").value;
				var issue = document.getElementById("issue").value;
				socket.emit("sendName",name,issue);
			}
			socket.on("update", function(list){
				var wait = document.getElementById("listing");
				wait.innerHTML = "";
				message.innerHTML = "";
				if(list.length == 0)
					message.innerHTML = "Line is currently empty.";
				for(var i = 0;i<list.length;i++)
				{
					var thing = document.createElement('li');
					thing.appendChild(document.createTextNode(list[i].name + " @ " + moment(list[i].time).format("h:mm A ddd") + " (" + list[i].issue + ")"));
					wait.appendChild(thing);
				}
			});
		</script>
		<h1>Call Me Over!</h1>
		<input type=text id=name>
		<select id=issue>
			<option value="lab" selected=selected>Lab Checkoff</option>
			<option value="question">Question</option>
		</select>
		<button onclick="sendName()">Add Name to List</button>
		<ol id="listing">
		</ol>
		<p id=message></p>
	</body>
</html>
